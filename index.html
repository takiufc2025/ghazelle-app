<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GHAZELLE COLLECTION | Ø²Ù„ÙŠØ¬ Ø¹ØµØ±ÙŠ</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #003366; --accent: #3b82f6; --white: rgba(255, 255, 255, 0.96); }
        body, html { margin: 0; padding: 0; font-family: 'Cairo', sans-serif; height: 100%; width: 100%; }
        
        /* Ø§Ù„Ø®Ù„ÙÙŠØ© Ø¨Ø²Ø®Ø±ÙØ© Ø§Ù„Ø²Ù„ÙŠØ¬ */
        .bg-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: url('https://output.googleusercontent.com/static/image_generation_content/0/generated_image.webp') center/cover no-repeat;
            z-index: -1;
        }

        /* Ø´Ø§Ø´Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨ */
        #welcome-screen {
            position: fixed; width: 100%; height: 100vh; background: rgba(0, 20, 40, 0.88);
            display: flex; flex-direction: column; justify-content: center; align-items: center; 
            color: white; z-index: 1000; transition: 0.8s ease-in-out;
        }

        .start-btn {
            padding: 18px 50px; background: var(--accent); color: white; border: none;
            border-radius: 50px; font-size: 1.4rem; font-weight: bold; cursor: pointer;
            box-shadow: 0 5px 20px rgba(59, 130, 246, 0.4);
        }

        /* Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ù„Ù„Ù†Ù…ÙˆØ°Ø¬ */
        .main-container {
            max-width: 500px; margin: 40px auto; padding: 30px;
            background: var(--white); border-radius: 25px; display: none;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3); animation: slideUp 0.6s ease;
        }

        @keyframes slideUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }

        .input-row { display: flex; gap: 10px; margin-bottom: 15px; }
        input, select { padding: 15px; border: 2px solid #cbd5e1; border-radius: 12px; width: 100%; font-family: inherit; }
        
        .choice-btn { flex: 1; padding: 15px; border: 2px solid #cbd5e1; border-radius: 12px; text-align: center; cursor: pointer; font-weight: bold; background: #f8fafc; }
        .choice-btn.active { background: var(--primary); color: white; }

        .submit-btn { width: 100%; padding: 18px; background: #10b981; color: white; border: none; border-radius: 12px; font-size: 1.3rem; font-weight: bold; cursor: pointer; }
        
        .hidden { display: none; }
        .success-box { text-align: center; display: none; padding: 40px; }
    </style>
</head>
<body>

<div class="bg-overlay"></div>

<div id="welcome-screen">
    <h1 style="font-size: 2.5rem;">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ</h1>
    <p style="margin-bottom: 30px;">ØªØµØ§Ù…ÙŠÙ…Ù†Ø§ ØªØ¬Ù…Ø¹ Ø¨ÙŠÙ† Ø§Ù„Ø£ØµØ§Ù„Ø© ÙˆØ§Ù„Ø¹ØµØ±Ù†Ø©</p>
    <button class="start-btn" onclick="openApp()">ØªÙ‚Ø¯ÙŠÙ… Ø·Ù„Ø¨</button>
</div>

<div class="main-container" id="app-form">
    <div id="form-content">
        <h2 style="text-align: center; color: var(--primary);">ğŸ“‹ Ø§Ø³ØªÙ…Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨</h2>
        <form id="orderForm">
            <div class="input-row">
                <input type="text" name="firstname" placeholder="Ø§Ù„Ø§Ø³Ù…" required>
                <input type="text" name="familyname" placeholder="Ø§Ù„Ù„Ù‚Ø¨" required>
            </div>
            <input type="tel" name="phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ" style="margin-bottom:15px;" required>

            <div class="input-row">
                <select name="model" required><option value="">Ø§Ù„Ù…ÙˆØ¯Ø§Ù„</option><option value="Noor">Noor</option><option value="Ghazelle">Ghazelle</option></select>
                <select name="size" required><option value="">Ø§Ù„Ù…Ù‚Ø§Ø³</option><option value="36">36</option><option value="38">38</option></select>
            </div>

            <div class="input-row" style="margin-top: 10px;">
                <div class="choice-btn" id="homeBtn" onclick="selectDelivery('Ø§Ù„Ù…Ù†Ø²Ù„')">ğŸ  Ù„Ù„Ù…Ù†Ø²Ù„</div>
                <div class="choice-btn" id="deskBtn" onclick="selectDelivery('Ø§Ù„Ù…ÙƒØªØ¨')">ğŸ¢ Ø§Ù„Ù…ÙƒØªØ¨</div>
            </div>
            <input type="hidden" name="delivery_type" id="delivery_type" required>

            <div id="geo-fields" class="hidden">
                <select name="wilaya" style="margin-top:15px;" onchange="this.nextElementSibling.classList.remove('hidden')">
                    <option value="">Ø§Ø®ØªØ± Ø§Ù„ÙˆÙ„Ø§ÙŠØ©</option>
                    <option value="Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±">Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±</option><option value="ÙˆÙ‡Ø±Ø§Ù†">ÙˆÙ‡Ø±Ø§Ù†</option>
                </select>
                <select name="city" class="hidden" style="margin-top:15px;">
                    <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø¨Ù„Ø¯ÙŠØ©</option><option value="Ø§Ù„Ù…Ø±ÙƒØ²">Ø§Ù„Ù…Ø±ÙƒØ²</option>
                </select>
            </div>

            <button type="submit" class="submit-btn" id="subBtn" style="margin-top:20px;">Ø§Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ÙŠØ©</button>
        </form>
    </div>
    <div id="success-box" class="success-box">
        <div style="font-size: 4rem;">âœ¨</div>
        <h3 style="color: #10b981;">Ø´ÙƒØ±Ø§Ù‹ Ø¹Ù„Ù‰ Ø«Ù‚ØªÙƒ!</h3>
        <p>ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­.</p>
    </div>
</div>

<script>
    function openApp() {
        document.getElementById('welcome-screen').style.transform = 'translateY(-100%)';
        setTimeout(() => { document.getElementById('app-form').style.display = 'block'; }, 600);
    }

    function selectDelivery(type) {
        document.getElementById('delivery_type').value = type;
        document.getElementById('homeBtn').classList.toggle('active', type === 'Ø§Ù„Ù…Ù†Ø²Ù„');
        document.getElementById('deskBtn').classList.toggle('active', type === 'Ø§Ù„Ù…ÙƒØªØ¨');
        document.getElementById('geo-fields').classList.remove('hidden');
    }

    document.getElementById('orderForm').onsubmit = async function(e) {
        e.preventDefault();
        document.getElementById('subBtn').innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...";
        const data = Object.fromEntries(new FormData(this));

        try {
            // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø±Ø§Ø¨Ø· Ù†Ø³Ø¨ÙŠ Ù„ÙŠØ¹Ù…Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
            const res = await fetch('/api/orders', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            });
            if (res.ok) {
                document.getElementById('form-content').style.display = 'none';
                document.getElementById('success-box').style.display = 'block';
            }
        } catch (err) { alert("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…"); }
    };
</script>
</body>
</html>